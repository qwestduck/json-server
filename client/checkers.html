<!DOCTYPE html>
<html>
<head>
<script type='text/javascript' src='jquery-1.9.1.min.js'></script>
</head>
<body>

<script type='text/javascript'>
var RESPONSE = {};

function doRequest(url, obj, callback) {
    $('body').append("<p>Sending Request: " + JSON.stringify(obj) + "</p>");
    $.ajax({
        type: 'POST',
        url: "http://localhost:8000" + url,
        data: obj,
        crossDomain: 'true',
        error: function(x,y,z){ alert('An error has occurred:\n' + JSON.stringify(x) + '\n' + y + '\n' + z); },
        success: function(data) {
		    $('body').append("<p>Received Request: " + data + "</p>");
		    $.extend(RESPONSE, $.parseJSON(data));
			callback();
        }
    });
}

/* API */
function connect() {
    doRequest("/connect", {}, function() { $('body').append("<p>Connected: ID=" + RESPONSE['ID'] + "</p>"); });
}

function game_move($id, auth, game, column, row) {
    doRequest("/game/move", {'ID': id, 'AUTH': auth, 'GAMEID': game, 'COMMAND': ['MOVE', column, row]});
}

function game_status(id, auth, game) {
    doRequest("/game/status", {"ID": id, "AUTH": auth, "GAMEID": game});
}

$(document).ready(function () {
    connect();
});
</script>
</body>
</html>
